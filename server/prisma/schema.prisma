generator client {
  provider = "prisma-client-js"
  version  = "6.3.0"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum UserRole {
  merchant @map("merchant")
  admin    @map("admin")
}

enum HotelStatus {
  pending   @map("pending")
  passed    @map("passed")
  rejected  @map("rejected")
  offline   @map("offline")
}

type HotelDiscount {
  type  String
  value Float
}

model User {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  username    String   @unique @db.String
  password    String   @db.String
  role        UserRole @default(merchant) @db.String
  createTime  DateTime @default(now()) @map("createTime")
  updateTime  DateTime @updatedAt @map("updateTime")
  hotels      Hotel[]

  @@map("users")
}

model Hotel {
  id          String        @id @default(auto()) @map("_id") @db.ObjectId
  nameCn      String        @db.String
  nameEn      String        @db.String
  address     String        @db.String
  star        Int           @db.Int
  roomType    String[]      @db.String[]
  price       Float         @db.Float
  openTime    String        @db.String
  attractions String[]      @db.String[]
  traffic     String        @db.String
  discount    HotelDiscount?
  status      HotelStatus   @default(pending) @db.String
  rejectReason String?      @db.String
  merchantId  String        @db.ObjectId
  createTime  DateTime      @default(now()) @map("createTime")
  updateTime  DateTime      @updatedAt @map("updateTime")

  merchant    User          @relation(fields: [merchantId], references: [id])

  @@index([merchantId])
  @@index([status])
  @@map("hotels")
}
