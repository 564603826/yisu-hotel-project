generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/client"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  merchant
  admin
}

enum HotelStatus {
  draft
  pending
  approved
  rejected
  published
  offline
}

model User {
  id        Int      @id @default(autoincrement())
  username  String   @unique @db.VarChar(50)
  password  String   @db.VarChar(255)
  role      Role     @default(merchant)
  createdAt DateTime @default(now())
  hotel     Hotel?

  @@map("User")
}

model Hotel {
  id                 Int          @id @default(autoincrement())
  nameZh             String       @db.VarChar(100)
  nameEn             String       @db.VarChar(100)
  address            String       @db.VarChar(255)
  starRating         Int
  roomTypes          Json
  price              Decimal      @db.Decimal(10, 2)
  openDate           DateTime     @db.Date
  nearbyAttractions  String?
  nearbyTransport    String?
  nearbyMalls        String?
  discounts          Json?
  images             Json?
  description        String?
  status             HotelStatus  @default(draft)
  rejectReason       String?      @db.VarChar(255)
  draftData          Json?
  creatorId          Int          @unique
  creator            User         @relation(fields: [creatorId], references: [id])
  createdAt          DateTime     @default(now())
  updatedAt          DateTime     @updatedAt

  @@index([status])
  @@index([starRating])
  @@map("Hotel")
}
